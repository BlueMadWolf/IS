;========================================================================
; Этот блок реализует логику обмена информацией с графической оболочкой,
; а также механизм остановки и повторного пуска машины вывода
; Русский текст в комментариях разрешён!

(deftemplate ioproxy  ; шаблон факта-посредника для обмена информацией с GUI
	(slot fact-id)        ; теоретически тут id факта для изменения
	(multislot answers)   ; возможные ответы
	(multislot messages)  ; исходящие сообщения
	(slot reaction)       ; возможные ответы пользователя
	(slot value)          ; выбор пользователя
	(slot restore)        ; забыл зачем это поле
)

; Собственно экземпляр факта ioproxy
(deffacts proxy-fact
	(ioproxy
		(fact-id 0112) ; это поле пока что не задействовано
		(value none)   ; значение пустое
		(messages)     ; мультислот messages изначально пуст
	)
)

(defrule clear-messages
	(declare (salience 90))
	?clear-msg-flg <- (clearmessage)
	?proxy <- (ioproxy)
	=>
	(modify ?proxy (messages))
	(retract ?clear-msg-flg)
	(printout t "Messages cleared ..." crlf)	
)

(defrule set-output-and-halt
	(declare (salience 99))
	?current-message <- (sendmessagehalt ?new-msg)
	?proxy <- (ioproxy (messages $?msg-list))
	=>
	(printout t "Message set : " ?new-msg " ... halting ..." crlf)
	(modify ?proxy (messages ?new-msg))
	(retract ?current-message)
	(halt)
)

(defrule append-output-and-halt
	(declare (salience 99))
	?current-message <- (appendmessagehalt $?new-msg)
	?proxy <- (ioproxy (messages $?msg-list))
	=>
	(printout t "Messages appended : " $?new-msg " ... halting ..." crlf)
	(modify ?proxy (messages $?msg-list $?new-msg))
	(retract ?current-message)
	(halt)
)

(defrule set-output-and-proceed
	(declare (salience 99))
	?current-message <- (sendmessage ?new-msg)
	?proxy <- (ioproxy)
	=>
	(printout t "Message set : " ?new-msg " ... proceed ..." crlf)
	(modify ?proxy (messages ?new-msg))
	(retract ?current-message)
)

(defrule append-output-and-proceed
	(declare (salience 99))
	?current-message <- (appendmessage ?new-msg)
	?proxy <- (ioproxy (messages $?msg-list))
	=>
	(printout t "Message appended : " ?new-msg " ... proceed ..." crlf)
	(modify ?proxy (messages $?msg-list ?new-msg))
	(retract ?current-message)
)

; это правило не работает - исправить (тут нужна печать списка)
(defrule print-messages
	(declare (salience 99))
	?proxy <- (ioproxy (messages ?msg-list))
	?update-key <- (updated True)
	=>
	(retract ?update-key)
	(printout t "Messages received : " ?msg-list crlf)
)

;======================================================================================
(deftemplate dragon 
	(slot name) 
	(slot category)
	(slot color)
	(slot location)
	(slot feature)
	(slot goal)
	(slot weather)
    (slot fire)
)

(defrule greeting
   =>
   (printout t "Hello! " crlf)
)


(defrule r0
	(declare (salience 20))
	?p1 <-	(dragon (name ?name1) 
	)
	(test (<> (str-compare ?name1 "nil") 0))
	;(test (< (fact-index ?p1) (fact-index ?p2)))
	=> 
	(assert (appendmessagehalt (str-cat "У нас есть Дракон! Имя = " ?name1 ))); " | Цвет = " ?color1 " | Категория = " ?category1 " | Локация = " ?location1)))
)

(defrule match-dragon-for-user 
	(declare (salience 10))
	=> 
	(assert (sendmessagehalt "Дракон не нашёлся, но вы там держитесь!"))
) 

(defrule r1
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Погоня)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r2
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
     (category Разящие)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r3
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Неизвестно)
        (feature ?feature1&Высокая_скорость_полета|Безупречная_ориентация)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
       (name Ночная_фурия)))
)
(defrule r4
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Светлый)
        (location ?location1&Неизвестно)
        (feature ?feature1&Высокая_скорость_полета|Маскировка|Безупречная_ориентация)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
       (name Дневная_фурия)))
)
(defrule r5
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Горы)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Электроразряд)
   )
   =>
   (assert (dragon
       (name Скрилл)))
)
(defrule r6
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Светлый)
        (location ?location1&Лед)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Ледяной_заряд)
   )
   =>
   (assert (dragon
     (category Разящие)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r7
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Горы)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Электроразряд)
   )
   =>
   (assert (dragon
       (name Скрилл)))
)
(defrule r8
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r9
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Шпионаж)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r10
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r11
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Безупречная_ориентация)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r12
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Спасательная_операция)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Безупречная_ориентация)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r13
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Спасательная_операция)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Сильная_огневая_мощь)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r14
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Погоня)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Сильная_огневая_мощь)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r15
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Спасательная_операция)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Превосходное_обоняние)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r16
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Светлый)
        (location ?location1&Водная_среда)
        (feature ?feature1&Сильная_огневая_мощь|Толстая_броня)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
       (name Великий_смутьян)))
)
(defrule r17
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Темный)
        (location ?location1&Водная_среда)
        (feature ?feature1&Сильная_огневая_мощь|Толстая_броня)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
       (name Великий_смутьян)))
)
(defrule r18
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Светлый)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Сильная_огневая_мощь)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r19
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Темный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Сильная_огневая_мощь)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r20
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Светлый)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Толстая_броня)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r21
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Темный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Толстая_броня)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r22
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Зеленый)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд|Вода)
   )
   =>
   (assert (dragon
       (name Кипятильник)))
)
(defrule r23
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Синий)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд|Вода)
   )
   =>
   (assert (dragon
       (name Кипятильник)))
)
(defrule r24
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Красный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд|Вода)
   )
   =>
   (assert (dragon
       (name Кипятильник)))
)
(defrule r25
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Разный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд|Вода)
   )
   =>
   (assert (dragon
       (name Кипятильник)))
)
(defrule r26
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Зеленый)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Вода)
   ))
)
(defrule r27
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Синий)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Вода)
   ))
)
(defrule r28
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Красный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Вода)
   ))
)
(defrule r29
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Разный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Вода)
   ))
)
(defrule r30
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Зеленый)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Яд)
   ))
)
(defrule r31
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Синий)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Яд)
   ))
)
(defrule r32
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Красный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Яд)
   ))
)
(defrule r33
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Разный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Вода)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Яд)
   ))
)
(defrule r34
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Синий)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Звук)
   )
   =>
   (assert (dragon
       (name Громобой)))
)
(defrule r35
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Зеленый)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Звук)
   )
   =>
   (assert (dragon
       (name Громобой)))
)
(defrule r36
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Водные)
        (color ?color1&Разный)
        (location ?location1&Водная_среда)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Звук)
   )
   =>
   (assert (dragon
       (name Громобой)))
)
(defrule r37
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1&Самовоспламенение)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
       (name Ужасное_чудовище)))
)
(defrule r38
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Самовоспламенение)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
       (name Ужасное_чудовище)))
)
(defrule r39
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Самовоспламенение)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
       (name Ужасное_чудовище)))
)
(defrule r40
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Горы)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Электроразряд)
   )
   =>
   (assert (dragon
       (name Скрилл)))
)
(defrule r41
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Ночная_жуть)))
)
(defrule r42
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Зеленый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Ночная_жуть)))
)
(defrule r43
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Воздух)
   )
   =>
   (assert (dragon
       (name Тайфумеранг)))
)
(defrule r44
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Воздух)
   )
   =>
   (assert (dragon
       (name Тайфумеранг)))
)
(defrule r45
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь|Газ)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r46
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Жуткая_жуть)))
)
(defrule r47
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Жуткая_жуть)))
)
(defrule r48
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Газ)
   ))
)
(defrule r49
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Газ)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огонь)
   ))
)
(defrule r50
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r51
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Газ)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r52
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r53
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r54
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r55
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Воздух)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r56
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Воздух)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r57
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Поедание_камней)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category Камнееды)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r58
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
     (category Камнееды)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r59
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огненные_шары)
   )
   =>
   (assert (dragon
     (category Камнееды)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r60
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
       (name Громмель)))
)
(defrule r61
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
       (name Громмель)))
)
(defrule r62
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
       (name Громмель)))
)
(defrule r63
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Булава_на_конце_хвоста)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r64
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Поедание_камней)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r65
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Красный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Высокая_скорость_полета|Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
       (name Лаварыг)))
)
(defrule r66
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Красный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r67
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Разный)
        (location ?location1&Ледяная_пещера)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огненные_шары)
   )
   =>
   (assert (dragon
       (name Вострозуб)))
)
(defrule r68
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Разный)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огненные_шары)
   )
   =>
   (assert (dragon
     (category Камнееды)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r69
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Пасмурно)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r70
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Зеленый)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Громорог)))
)
(defrule r71
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Превосходное_обоняние)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r72
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Погоня)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r73
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Магний)
   )
   =>
   (assert (dragon
       (name Злобный_змеевик)))
)
(defrule r74
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Громорог)))
)
(defrule r75
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Синий)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Громорог)))
)
(defrule r76
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category Ищейки)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r77
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Магний)
   )
   =>
   (assert (dragon
     (category Ищейки)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r78
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Магний)
   )
   =>
   (assert (dragon
       (name Злобный_змеевик)))
)
(defrule r79
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Магний)
   )
   =>
   (assert (dragon
       (name Злобный_змеевик)))
)
(defrule r80
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Высокая_скорость_полета|Безупречная_ориентация)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
       (name Ночная_фурия)))
)
(defrule r81
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Безупречная_ориентация)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r82
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Ледяная_пещера)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Громокоготь)))
)
(defrule r83
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Ледяная_пещера)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Магний)
   )
   =>
   (assert (dragon
       (name Злобный_змеевик)))
)
(defrule r84
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Ледяная_пещера)
        (feature ?feature1&Самовоспламенение)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
       (name Ужасное_чудовище)))
)
(defrule r85
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маленькое_тело)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r86
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маленькое_тело)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r87
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Зеленый)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маленькое_тело)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r88
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маленькое_тело)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r89
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Самовоспламенение)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r90
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Ледяная_пещера)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r91
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r92
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r93
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Остров_драконов)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Керосиновый_гель)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r94
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r95
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Когтевики)
        (color ?color1&Оранжевый)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Четыре_крыла|Маневренность)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Шторморез)))
)
(defrule r96
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Когтевики)
        (color ?color1&Оранжевый)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Четыре_крыла)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r97
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Когтевики)
        (color ?color1&Оранжевый)
        (location ?location1)
        (feature ?feature1&Четыре_крыла)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маневренность)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r98
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Оранжевый)
        (location ?location1&Лес)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category Когтевики)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r99
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Когтевики)
        (color ?color1&Разный)
        (location ?location1&Лес)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Острокоготь)))
)
(defrule r100
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Когтевики)
        (color ?color1&Разный)
        (location ?location1&Лес)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маленькое_тело)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r101
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Высокая_скорость_полета|Три_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Тройной_удар)))
)
(defrule r102
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Три_хвоста)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r103
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Три_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r104
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Драконий_край)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r105
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Высокая_скорость_полета|Три_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Тройной_удар)))
)
(defrule r106
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Три_хвоста)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r107
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Три_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r108
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Разный)
        (location ?location1&Неизвестно)
        (feature ?feature1&Маскировка)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Кислота)
   )
   =>
   (assert (dragon
       (name Разнокрыл)))
)
(defrule r109
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Оранжевый)
        (location ?location1&Неизвестно)
        (feature ?feature1&Маскировка)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Кислота)
   )
   =>
   (assert (dragon
       (name Разнокрыл)))
)
(defrule r110
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Красный)
        (location ?location1&Неизвестно)
        (feature ?feature1&Маскировка)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Кислота)
   )
   =>
   (assert (dragon
       (name Разнокрыл)))
)
(defrule r111
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Неизвестно)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Кислота)
   )
   =>
   (assert (dragon
     (category Загадочные)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r112
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Кислота)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Неизвестно)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r113
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Разный)
        (location ?location1&Неизвестно)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Кислота)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r114
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Сильная_огневая_мощь|Толстая_броня|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Костолом)))
)
(defrule r115
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Светлый)
        (location ?location1&Остров_склад)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Ночная_жуть)))
)
(defrule r116
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Зеленый)
        (location ?location1&Остров_склад)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Ночная_жуть)))
)
(defrule r117
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Сильная_огневая_мощь|Толстая_броня|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category Загадочные)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r118
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Сильная_огневая_мощь)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r119
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Сильная_огневая_мощь)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Толстая_броня)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r120
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Толстая_броня)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Булава_на_конце_хвоста)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r121
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Светлый)
        (location ?location1&Драконий_край)
        (feature ?feature1&Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Сильная_огневая_мощь)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r122
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Разный)
        (location ?location1&Драконий_край)
        (feature ?feature1&Много_голов)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь|Газ)
   )
   =>
   (assert (dragon
       (name Кошмарный_пристеголов)))
)
(defrule r123
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Много_голов)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь|Газ)
   )
   =>
   (assert (dragon
     (category Загадочные)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r124
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Много_голов)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огонь)
   ))
)
(defrule r125
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1&Много_голов)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Газ)
   ))
)
(defrule r126
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Загадочные)
        (color ?color1&Разный)
        (location ?location1&Остров_Олух)
        (feature ?feature1&Много_голов)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь|Газ)
   )
   =>
   (assert (dragon
       (name Кошмарный_пристеголов)))
)
(defrule r127
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Светлый)
        (location ?location1&Острова)
        (feature ?feature1&Толстая_броня)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огненные_шары|Огонь)
   )
   =>
   (assert (dragon
       (name Вопль_смерти)))
)
(defrule r128
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Светлый)
        (location ?location1&Острова)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огненные_шары|Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Толстая_броня)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r129
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Светлый)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огненные_шары)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огонь)
   ))
)
(defrule r130
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Светлый)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огненные_шары)
   ))
)
(defrule r131
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Светлый)
        (location ?location1&Острова)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огонь)
   ))
)
(defrule r132
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Острова)
        (feature ?feature1&Маленькое_тело)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Жуткая_жуть)))
)
(defrule r133
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Кочегары)
        (color ?color1&Разный)
        (location ?location1&Лес)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Воздух)
   )
   =>
   (assert (dragon
       (name Тайфумеранг)))
)
(defrule r134
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Воздух)
   )
   =>
   (assert (dragon
     (category Кочегары)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r135
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Ночь)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Черный)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r136
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Холод)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Лед)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r137
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Снегопад)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Лед)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r138
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Жара)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r139
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Жара)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огненные_шары)
   ))
)
(defrule r140
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Жара)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire Огонь)
   ))
)
(defrule r141
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Оранжевый)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r142
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Яд)
   )
   =>
   (assert (dragon
     (category Водные)
     (color ?color1)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r143
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Разный)
        (location ?location1&Острова)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
       (name Громмель)))
)
(defrule r144
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Солнечно)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r145
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Снегопад)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Самовоспламенение)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r146
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Толстая_броня)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r147
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Сильный_ветер)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r148
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Красный)
        (location ?location1&Острова)
        (feature ?feature1&Высокая_скорость_полета|Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
       (name Лаварыг)))
)
(defrule r149
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Камнееды)
        (color ?color1&Красный)
        (location ?location1&Острова)
        (feature ?feature1&Поедание_камней|Булава_на_конце_хвоста)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Лава)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r150
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Острова)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Громокоготь)))
)
(defrule r151
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Ищейки)
        (color ?color1&Разный)
        (location ?location1&Лес)
        (feature ?feature1&Превосходное_обоняние)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Огонь)
   )
   =>
   (assert (dragon
       (name Громокоготь)))
)
(defrule r152
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Пасмурно)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r153
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Погоня)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Среда_не_имеет_значения)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r154
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Среда_не_имеет_значения)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r155
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Спасательная_операция)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Среда_не_имеет_значения)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r156
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Шпионаж)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Среда_не_имеет_значения)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r157
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Погоня)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Не_имеет_значения)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r158
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Побег)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Не_имеет_значения)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r159
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1&Спасательная_операция)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Не_имеет_значения)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r160
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Среда_не_имеет_значения)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Водная_среда)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r161
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Среда_не_имеет_значения)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Суша)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r162
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Горы)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r163
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Лед)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r164
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Драконий_край)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r165
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Неизвестно)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r166
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Вулканы)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r167
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Остров_драконов)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r168
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Остров_склад)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r169
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Ледяная_пещера)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r170
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Остров_Олух)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r171
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Лес)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r172
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1&Суша)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location Острова)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r173
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Светлый)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r174
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Красный)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r175
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Черный)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r176
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Меняющий)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r177
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Зеленый)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r178
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Разный)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r179
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Синий)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r180
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1&Не_имеет_значения)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Темный)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r181
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Светлый)
        (location ?location1&Неизвестно)
        (feature ?feature1&Высокая_скорость_полета|Безупречная_ориентация)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Маскировка)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r182
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Черный)
        (location ?location1&Неизвестно)
        (feature ?feature1&Безупречная_ориентация)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r183
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1&Разящие)
        (color ?color1&Светлый)
        (location ?location1&Неизвестно)
        (feature ?feature1&Безупречная_ориентация)
        (goal ?goal1)
        (weather ?weather1)
        (fire ?fire1&Плазма)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color ?color1)
     (location ?location1)
     (feature Высокая_скорость_полета)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule r184
   (declare(salience 30))
   ?p1 <- (dragon (name ?name1)
        (category ?category1)
        (color ?color1)
        (location ?location1)
        (feature ?feature1)
        (goal ?goal1)
        (weather ?weather1&Солнечно)
        (fire ?fire1)
   )
   =>
   (assert (dragon
     (category ?category1)
     (color Светлый)
     (location ?location1)
     (feature ?feature1)
     (goal ?goal1)
     (weather ?weather1)
     (fire ?fire1)
   ))
)
(defrule add-fact 
   (declare (salience 35)) 
   => 
   (assert (dragon (weather Ночь) (fire Плазма) (feature Высокая_скорость_полета) (goal Побег))) 
) 
